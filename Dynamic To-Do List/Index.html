<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To-Do App</title>
</head>
<body>

<div class="todo-container">
  <h1>Add your Task</h1>
  <input type="text" id="todoInput" placeholder="Enter a task">
  <button id="addTodo">Add</button>
  <ul id="todoList"></ul>
  <button id="clearAll" class="clear">Clear All</button>
</div>

<script>
const todoInput = document.getElementById('todoInput');
const addTodo = document.getElementById('addTodo');
const todoList = document.getElementById('todoList');
const clearAll = document.getElementById('clearAll');

// ✅ Get tasks from localStorage
function getTasks() {
  return JSON.parse(localStorage.getItem('todoTasks')) || [];
}

// ✅ Save tasks to localStorage
function saveTasks(tasks) {
  localStorage.setItem('todoTasks', JSON.stringify(tasks));
}

// ✅ Render all tasks on screen
function renderTasks() {
  todoList.innerHTML = '';
  const tasks = getTasks();

  tasks.forEach((task, index) => {
    const li = document.createElement('li');

    const checkbox = document.createElement('input');
    checkbox.type = 'checkbox';
    checkbox.checked = task.completed;

    checkbox.addEventListener('click', () => {
      tasks[index].completed = checkbox.checked;
      saveTasks(tasks);
      li.style.textDecoration = checkbox.checked ? 'line-through' : 'none';
    });

    const span = document.createElement('span');
    span.textContent = ' ' + task.text + ' ';

    const button = document.createElement('button');
    button.textContent = 'Delete';
    button.addEventListener('click', () => {
      tasks.splice(index, 1);
      saveTasks(tasks);
      renderTasks();
    });

    li.appendChild(checkbox);
    li.appendChild(span);
    li.appendChild(button);
    li.style.textDecoration = task.completed ? 'line-through' : 'none';

    todoList.appendChild(li);
  });
}

// ✅ Add task on button click
addTodo.addEventListener('click', () => {
  const taskText = todoInput.value.trim();
  if (taskText) {
    const tasks = getTasks();
    tasks.push({ text: taskText, completed: false });
    saveTasks(tasks);
    renderTasks();
    todoInput.value = '';
  }
});

// ✅ Clear all tasks
clearAll.addEventListener('click', () => {
  localStorage.removeItem('todoTasks');
  todoList.innerHTML = '';
});

// ✅ Load saved tasks on page load
renderTasks();
</script>

</body>
</html>
